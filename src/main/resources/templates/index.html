<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Video</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <link rel="icon" th:href="@{static/images/logo.png}">
    <link rel="stylesheet" type="text/css" th:href="@{static/css/animate.css}">
    <link rel="stylesheet" type="text/css" th:href="@{http://cdn.bootstrapmb.com/bootstrap/4.0.0/css/bootstrap.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{static/css/flatpickr.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{static/css/fontello.css}">
    <link rel="stylesheet" type="text/css" th:href="@{static/css/fontello-codes.css}">
    <link rel="stylesheet" type="text/css" th:href="@{static/css/thumbs-embedded.css}">
    <link rel="stylesheet" type="text/css" th:href="@{static/css/style.css}">
    <link rel="stylesheet" type="text/css" th:href="@{static/css/responsive.css}">
    <link rel="stylesheet" type="text/css" th:href="@{static/css/color.css}">

</head>


<body>


<div class="wrapper hp_1">

    <header>
        <div class="top_bar">
            <div class="container">
                <div class="top_header_content">
                    <div class="menu_logo">
                        <a href="#" title="" class="logo">
                            <img th:src="@{static/images/logo.png}" alt="">
                        </a>
                    </div><!--menu_logo end-->
                    <div class="search_form">
                        <form>
                            <input type="text" name="search" placeholder="搜索视频" id="search">
                            <button type="button" id="searchbtn">
                                <i class="icon-search"></i>
                            </button>
                        </form>
                    </div><!--search_form end-->
                        <ul shiro:user="" class="controls-lv">
                            <li class="user-log">
                                <div class="user-ac-img">
                                    <img th:src="@{static/images/resources/user-img.png}" alt="">
                                </div>
                                <div class="account-menu">
                                    <h4 th:text="${session.login_user.nickName}">
                                    </h4>
                                    <div class="sd_menu">
                                        <ul class="mm_menu">
                                            <li>
												<span>
													<i class="icon-user"></i>
												</span>
                                                <a th:href="@{usersetting}" title="">我的账户</a>
                                            </li>
                                            <li>
												<span>
													<i class="icon-playlist"></i>
												</span>
                                                <a th:href="@{videomanage}" title="">视频管理</a>
                                            </li>
                                            <li>
												<span>
													<i class="icon-logout"></i>
												</span>
                                                <a href="UserServlet?action=logout" title="">登出</a>
                                            </li>
                                        </ul>
                                    </div><!--sd_menu end-->
                                </div>
                            </li>
                            <li>
                                <a th:href="@{toUpload}" title="" class="btn-default">上传</a>
                            </li>
                        </ul>
                        <!--controls-lv end-->
                    <div class="clearfix"></div>
                </div><!--top_header_content end-->
            </div>
        </div><!--header_content end-->
        <div class="btm_bar">
            <div class="container">
                <div class="btm_bar_content">
                    <nav>
                        <ul>
                            <li><a th:href="@{index}" title="">首页</a>
                                <div class="mega-menu">
                                    <ul>
                                        <div th:each="typeA:${ session.typeAList }">
                                            <li><a href="#" title="" th:text="${ typeA.getTypeA() } + ''"></a>
                                                <ul>
                                                    <div th:each="typeB:${ session.typeBMap.get(typeA.getTypeA()) }">
                                                        <li><a th:href="${ 'toOneTypeVideo?id=' + typeB.getId()}" title="" th:text="${ typeB.getTypeB() }"></a></li>
                                                    </div>

                                                </ul>
                                            </li>
                                        </div>

                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </nav><!--navigation end-->
                        <ul shiro:user="" class="shr_links">
                            <li>
                                <h3>Go to : </h3>
                            </li>
                            <li>
                                <button data-toggle="tooltip" data-placement="top" title="收藏视频"
                                        onclick="window.location.href='http://localhost:8080/video/toCollectionPage'">
                                    <i class="icon-like"></i>
                                </button>
                            </li>
                            <li>
                                <button data-toggle="tooltip" data-placement="top" title="历史记录"
                                        onclick="window.location.href='http://localhost:8080/video/toHistoryPage'">
                                    <i class="icon-history"></i>
                                </button>
                            </li>
                        </ul>
                        <!--shr_links end-->
                    <div class="clearfix"></div>
                </div><!--btm_bar_content end-->
            </div>
        </div><!--btm_bar end-->
    </header><!--header end-->


    <div shiro:guest="">
        <section class="banner-section">
            <div class="container">
                <div class="banner-text">
                    <h2>观看、上传和分享</h2>
                    <a href="http://localhost:8080/video/tologin" title="">登陆/创建我的账号</a>
                </div><!--banner-text end-->
                <h3 class="headline">每日视频</h3>
            </div>
        </section>
        <!--banner-section end-->

        <section class="services-sec">
            <div class="container">
                <div class="services-row">
                    <div class="row">
                        <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                            <div class="service-col">
                                <img src="static/images/sv1.png" alt="">
                                <h3>创作激励</h3>
                            </div><!--service-col end-->
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                            <div class="service-col">
                                <img src="static/images/sv2.png" alt="">
                                <h3>获得关注</h3>
                            </div><!--service-col end-->
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                            <div class="service-col">
                                <img src="static/images/sv3.png" alt="">
                                <h3>分享生活</h3>
                            </div><!--service-col end-->
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                            <div class="service-col">
                                <img src="static/images/sv4.png" alt="">
                                <h3>获取财富 </h3>
                            </div><!--service-col end-->
                        </div>
                    </div>
                </div><!--services-row end-->
            </div>
        </section>
        <!--services-sec end-->
    </div>

    <section class="vds-main">
        <div shiro:user="" class="vidz-row">
            <div class="container">
                <div class="vidz_sec">
                    <div id="demo" class="carousel slide " data-ride="carousel">

                        <!-- 指示符 -->
                        <ul class="carousel-indicators">
                            <li data-target="#demo" data-slide-to="0" class="active"></li>
                            <li data-target="#demo" data-slide-to="1"></li>
                            <li data-target="#demo" data-slide-to="2"></li>
                        </ul>

                        <!-- 轮播图片 -->
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <a href="https://www.tmall.com/" target="_blank">
                                <img th:src="@{static/files/ad/1.jpg}" style="width: 1200px; height: 600px;"></a>
                            </div>
                            <div class="carousel-item">
                                <a href="https://www.taobao.com/" target="_blank">
                                <img th:src="@{static/files/ad/2.jpg}" style="width: 1200px; height: 600px;"></a>
                            </div>
                            <div class="carousel-item">
                                <a href="https://www.jd.com/" target="_blank">
                                <img th:src="@{static/files/ad/3.jpg}" style="width: 1200px; height: 600px;"></a>
                            </div>
                        </div>

                        <!-- 左右切换按钮 -->
                        <a class="carousel-control-prev" href="#demo" data-slide="prev">
                            <span class="carousel-control-prev-icon"></span>
                        </a>
                        <a class="carousel-control-next" href="#demo" data-slide="next">
                            <span class="carousel-control-next-icon"></span>
                        </a>

                    </div>
                </div>
            </div>
        </div>

        <div class="vidz-row">
            <div class="container">
                <div class="vidz_sec">
                    <h3>最新视频</h3>
                    <div class="vidz_list">
                        <div class="row" id="newvideo">
                        </div>
                    </div><!--vidz_list end-->
                </div><!--vidz_videos end-->
            </div>
        </div><!--vidz-row end-->
        <div class="vidz-row">
            <div class="container">
                <div class="vidz_sec">
                    <h3>热门视频</h3>
                    <div class="vidz_list">
                        <div class="row" id="hotvideo">
                        </div>
                    </div><!--vidz_list end-->
                </div><!--vidz_videos end-->
            </div>
        </div><!--vidz-row end-->
    </section><!--vds-main end-->

    <section class="more_items_sec text-center">
    </section><!--more_items_sec end-->

</div><!--wrapper end-->

<script type="text/javascript" th:src="@{static/js/jquery.min.js}"></script>
<script type="text/javascript" th:src="@{static/js/popper.js}"></script>
<script type="text/javascript" th:src="@{http://cdn.bootstrapmb.com/bootstrap/4.0.0/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{static/js/flatpickr.js}"></script>
<script type="text/javascript" th:src="@{static/js/script.js}"></script>
<script type="text/javascript" th:src="@{/static/lib/layui/layui.js}" charset="utf-8"></script>
<script>
    $(function () {
            $("#searchbtn").click(function () {
                var search = $("#search").val();
                window.location.href = "http://localhost:8080/video/tosearchpage";
            })
    });

    $(function () {
        $.ajax({
            url: "video/getRecentVideo",
            type: "POST",
            dataType: "json",
            success: function (data) {
                console.log(data);
                $.each(data.data,function (index,value) {
                    var videodiv = "<div class=\"col-lg-3 col-md-6 col-sm-6 col-6 full_wdth\">" +
                        "                                <div class=\"videoo\">" +
                        "                                    <div class=\"vid_thumbainl\">" +
                        "                                        <a href=\"http://localhost:8080/video/singlevideopage?id="+value.id+"\"\ >" +
                        "                                            <img src=\"http://localhost:8080/video/static/"+value.coverUrl +"\"style=\"width:260px;height:180px;\"\>" +
                        "                                            <span class=\"vid-time\">29:32</span>" +
                        "                                            <span class=\"watch_later\">" +
                        "<i class=\"glyphicon-star-empty\"></i>" +
                        "</span>" +
                        "                                        </a>" +
                        "                                    </div><!--vid_thumbnail end-->" +
                        "                                    <div class=\"video_info\">" +
                        "                                        <h3>  <a href=http://localhost:8080/video/singlevideopage?id="+value.id+"\" title=\"\">"+value.title+"</a></h3>" +
                        "                                        <h4><a href=\"pages/video/singlechannel.jsp?\" title=\"\">"+value.nickName+"\</a></h4>" +
                        "                                        <span>"+value.views+"次观看 .<small class=\"posted_dt\">"+value.createTime+"</small></span>" +
                        "                                    </div>" +
                        "                                </div><!--videoo end-->" +
                        "                            </div>";
                    $("#newvideo").append(videodiv);
                });

            }
        });
        $.ajax({
            url: "video/getHotVideo",
            type: "POST",
            dataType: "json",
            success: function (data) {
                console.log(data);
                $.each(data.data,function (index,value) {
                    var videodiv = "<div class=\"col-lg-3 col-md-6 col-sm-6 col-6 full_wdth\">" +
                        "                                <div class=\"videoo\">" +
                        "                                    <div class=\"vid_thumbainl\">" +
                        "                                        <a href=\"http://localhost:8080/video/singlevideopage?id="+value.id+"\"\ >" +
                        "                                            <img src=\"http://localhost:8080/video/static/"+value.coverUrl +"\"style=\"width:260px;height:180px;\"\>" +
                        "                                            <span class=\"vid-time\">29:32</span>" +
                        "                                            <span class=\"watch_later\">" +
                        "<i class=\"glyphicon-star-empty\"></i>" +
                        "</span>" +
                        "                                        </a>" +
                        "                                    </div><!--vid_thumbnail end-->" +
                        "                                    <div class=\"video_info\">" +
                        "                                        <h3>  <a href=http://localhost:8080/video/singlevideopage?id="+value.id+"\" title=\"\">"+value.title+"</a></h3>" +
                        "                                        <h4><a href=\"pages/video/singlechannel.jsp?\" title=\"\">"+value.nickName+"\</a></h4>" +
                        "                                        <span>"+value.views+"次观看 .<small class=\"posted_dt\">"+value.createTime+"</small></span>" +
                        "                                    </div>" +
                        "                                </div><!--videoo end-->" +
                        "                            </div>";
                    $("#hotvideo").append(videodiv);
                });
            }
        });
    })

</script>

</body>

</html>